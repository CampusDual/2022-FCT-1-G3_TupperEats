<?xml version="1.0" encoding="UTF-8"?>
<JdbcEntitySetup
 xmlns="http://www.ontimize.com/schema/jdbc"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.ontimize.com/schema/jdbc http://www.ontimize.com/schema/jdbc/ontimize-jdbc-dao.xsd"
 catalog="" schema="${mainschema}" table="product"
 datasource="mainDataSource" sqlhandler="dbSQLStatementHandler">
 <DeleteKeys>
  <Column>product_id</Column>
 </DeleteKeys>
 <UpdateKeys>
  <Column>product_id</Column>
 </UpdateKeys>
 <GeneratedKey>product_id</GeneratedKey>
 <Queries>
		<Query id="default">
			<Sentence>
			   <![CDATA[
			     SELECT
			      #COLUMNS#
			     FROM
			      product p
			      left join product_category pc on p.product_category_id = pc.id_product_category
			
			      left join product_type pt on p.id_product_type = pt.product_type_id
			
				#WHERE#
			   ]]>
		</Sentence>
		</Query>
		
		<Query id="allergicProduct">
			<Sentence>
			   <![CDATA[
			     SELECT
			     #COLUMNS#
				 FROM product p
				 join product_allergic pa on p.id_product = pa.id_product 
				 join allergic a on pa.id_allergic = a.allergic_id 
				 #WHERE#
			   ]]>
		</Sentence>
		</Query>
		
		<Query id="plate_type">
			<Sentence>
			   <![CDATA[
			     SELECT
			      #COLUMNS#
			     FROM
			      product     
				 WHERE
					id_product_type=3
			   ]]>
		</Sentence>
		</Query>
		
		<Query id="dessert_type">
			<Sentence>
			   <![CDATA[
			     SELECT
			      #COLUMNS#
			     FROM
			      product     
				WHERE
					id_product_type=4	
			   ]]>
		</Sentence>
		</Query>
	</Queries>
</JdbcEntitySetup>